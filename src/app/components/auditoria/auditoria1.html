<style>
  h3 {
    text-align: center;
  }

  h2 {
    text-align: center;
  }
</style>


  <section>
    <div class="row">
      <div class="col-7">
        <plex-box type="danger">
          <header>
            <h3>Pacientes que requieren revisión</h3>
          </header>
          <!-- Search results -->
          <div>
            <div class="table">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Documento</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Fecha Nac.</th>
                    <th>Sexo</th>
                    <th>Estado</th>
                    <th>% Sisa</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="hover" *ngFor="let paciente of pacientesAudit" (click)="mostrarPaciente=true; pacienteSelected = paciente;verDuplicados=false;validate=false">
                    <td>{{paciente.documento}}</td>
                    <td>{{paciente.nombre| uppercase}}</td>
                    <td>{{paciente.apellido| uppercase}}</td>
                    <td>{{paciente.fechaNacimiento | date:'dd-MM-yyyy'}}</td>
                    <td>{{paciente.sexo}}</td>
                    <td>{{paciente.estado}}</td>
                    <td> {{paciente.matchSisa * 100}}%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </plex-box>
        <plex-loader *ngIf=loadingPrimaryTable></plex-loader>
      </div>
      <!--fin de col-md-7 -->

      <div class="col" *ngIf=mostrarPaciente>
        <plex-box type="info">
          <h2>{{pacienteSelected.nombre}} {{pacienteSelected.apellido}}</h2>
          <hr>
          <h4><b>Documento: </b>{{pacienteSelected.documento}}</h4>
          <h4><b>Fecha Nac.: </b> {{pacienteSelected.fechaNacimiento | date:'dd-MM-yyyy'}}</h4>
          <h4><b>Sexo: </b> {{pacienteSelected.sexo}}</h4>
          <h4><b>Estado: </b>{{pacienteSelected.estado}}</h4>
          <plex-button icon="account-search" type="primary" label="Consultar Sisa" (click)="validate=true;verDuplicados=false"></plex-button>
          <plex-button icon="account-search" type="success" label="Ver Duplicados" *ngIf="!verDuplicados" (click)="verDuplicados=true"></plex-button>
          <plex-button icon="account-search" type="danger" label="Fusionar Selección" *ngIf="verDuplicados" (click)="verDuplicados=false"></plex-button>
          <br> <br>
          <div *ngIf=validate>
            <h2>Pacientes encontrados <span class="badge">{{datosSisa.length}}</span> </h2>
            <table class="table table-striped">
              <tr *ngFor="let pacienteSisa of datosSisa">
                <td><b>Nombre y Apellido:</b> {{pacienteSisa.nombre}} {{pacienteSisa.apellido}} </td>
                <td><b>Documento:</b> {{pacienteSisa.documento}}</td>
                <td><b>Fec de Nac.:</b> {{pacienteSisa.fechaNacimiento | date: 'dd-MM-yyyy'}} </td>
                <td><b>Sexo:</b> {{pacienteSisa.sexo}} </td>
                <td>
                  <plex-button icon="account-check" type="success" label="Validar" (click)="validate=false"></plex-button>
                </td>
              </tr>
            </table>
            <div *ngIf=mensaje class="alert" role="alert">
              <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
              <span class="sr-only">Error:</span> {{mensaje}}
            </div>
          </div>

        </plex-box>
      </div>
    </div>

    <br>
    <plex-box type="info" *ngIf=verDuplicados>
      <header>
        <h2>Posibles duplicados</h2>
      </header>
      <div class="row">
        <div class="col">
          <div class="table">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Documento</th>
                  <th>Nombre</th>
                  <th>Apellido</th>
                  <th>Fecha Nac.</th>
                  <th>Sexo</th>
                  <th>Estado</th>
                  <th>% Similitud</th>
                </tr>
              </thead>
              <tbody>
                <tr class="hover" *ngFor="let paciente of candidatos" style="cursor: pointer;">
                  <td (click)="paciente.seleccionado = !paciente.seleccionado">
                    <i *ngIf="paciente.seleccionado" class="mdi mdi-check-circle"></i>
                    <i *ngIf="!paciente.seleccionado" class="mdi mdi-checkbox-blank-circle-outline"></i>
                  </td>
                  <td>{{paciente.documento}}</td>
                  <td>{{paciente.nombre| uppercase}}</td>
                  <td>{{paciente.apellido| uppercase}}</td>
                  <td>{{paciente.fechaNacimiento | date:'dd-MM-yyyy'}}</td>
                  <td>{{paciente.sexo}}</td>
                  <td>{{paciente.estado}}</td>
                  <td> {{paciente.similitud * 100}}%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </plex-box>

  </section>
