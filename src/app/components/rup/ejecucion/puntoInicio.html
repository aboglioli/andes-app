<style>
    h5.box-title-principal {
        color: #00A8E0;
        font-weight: 350;
        padding-bottom: 5px;
    }
    
    h5.titulo-item-lista {
        display: inline-block;
        font-weight: 400;
        line-height: 1;
    }
    
    small {
        color: grey;
        font-weight: 400;
        font-size: 0.85rem;
    }
    /*Etiquetas*/
    
    .badge {
        text-transform: uppercase;
        font-size: 0.75rem;
        font-weight: 500;
        margin: 0px 10px 10px 0px;
        display: inline-block;
    }
    
    .badge-danger {
        border: 1.5px solid #dd4b39;
        border-radius: 0px;
        background: transparent;
        color: #dd4b39;
    }
    
    .badge-success {
        border: 1.5px solid #8CC63F;
        border-radius: 0px;
        background: transparent;
        color: #8CC63F;
    }
    
    .badge-warning {
        border: 1.5px solid #ff8d22;
        border-radius: 0px;
        background: transparent;
        color: #ff8d22;
    }
    
    .badge-info {
        border: 1.5px solid #00A8E0;
        border-radius: 0px;
        background: transparent;
        color: #00A8E0;
    }
    /* Item lista */
    
    h5.item-title {
        display: inline-block;
        font-weight: 600;
        line-height: 1;
    }
    
    h5.item-title:hover {
        color: #00A8E0;
    }
    
    .list-group-item-hora {
        border: solid 1px #00c0ef;
        color: #00c0ef;
        font-weight: 500;
        /*padding: 2.5rem;*/
        text-align: center;
    }
    /*.Estilos Tabla*/
    
    table {
        margin-top: 20px;
    }
    
    th {
        font-size: 1rem;
        font-weight: 400;
    }
    
    .item:hover {
        background-color: #f9f9f9;
        border: solid 1px #00A8E0;
    }
    
    .item:active {
        background-color: #f5f5f5;
        border: solid 1px #AAAAAA;
    }
    
    .btn-contextual {
        font-size: 1.5em;
        color: #AAAAAA;
        background-color: white;
        border-color: none;
        box-shadow: none;
        border: none;
    }
    
    .btn-primary {
        margin-top: 5px;
    }
    
    .list-inline>.list-inline-item {
        margin-bottom: 10px;
    }
    
    .list-group>.list-group-item {
        border-color: #AAAAAA;
        border-radius: 0px;
    }
    
    .list-group-item:hover {
        background-color: #f9f9f9;
        border: solid 1px #00A8E0;
    }
    
    .list-group-item:active {
        background-color: #f5f5f5;
        border: solid 1px #AAAAAA;
    }
    
    .icono {
        margin-right: 10px;
        float: right;
    }
</style>

<header>
    <!--<div class="row">
    <div class="col">
      <small>
      <b>Profesional:</b> {{this.auth.usuario.apellido}}, {{this.auth.usuario.nombre}}
      </small>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <small>
      <b>Especialidad: </b>
      <span *ngFor="let especialidad of auth.profesional.especialidad"> {{especialidad.nombre}}.</span>
        </small>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <small>
      <b>Matricula: </b>
      <span *ngFor="let matricula of auth.profesional.matriculas"> {{matricula.numero}}.</span>
      </small>
    </div>
  </div>-->

    <!--<div class="row">
    <div class="col">
      {{fechaActual | date: 'dd/MM/yyyy'}}
    </div>
  </div>-->

</header>


<section>
    <div class="row">
        <div class="col-12">
            <plex-box title="Pantalla inicio">
                <header>
                    <div class="row">
                        <div class="col-6">
                            <h1>Lista de pacientes</h1>
                        </div>
                        <div class="col-6">
                            <!--<plex-text suffix="<i class='btn btn-info mdi mdi-account-search'></i>" [(ngModel)]="searchPaciente" name="searchPaciente" (change)="buscarPaciente($event)" placeholder="Buscar Paciente"></plex-text>-->
                        </div>
                    </div>
                </header>
                <div class="row" *ngIf="mostrarPacientesSearch">
                    <div class="col">
                        <pacientesSearch (change)="mostrarLista = false" (selected)="onPacienteSelected($event)" [modoCompleto]="false"></pacientesSearch>
                    </div>
                </div>
                <div class="row" *ngIf="paciente">
                    <div class="col">
                        <header-paciente [paciente]="paciente"></header-paciente>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <plex-select [(ngModel)]="prestacionSeleccion" name="nombrePrestacion" label="Tipos de prestaciones" (getData)="loadPrestacionesProfesional($event)" (change)="filtraPorPrestacion()">
                        </plex-select>
                    </div>
                </div>
                <div class="row" *ngIf="paciente && prestacionSeleccion">
                    <div class="col">
                        <plex-button icon="account" (click)="crearPrestacionVacia(prestacionSeleccion)" label="Generar Solicitud" type="success"></plex-button>
                    </div>
                </div>
                <div class="row" *ngIf="mostrarLista">
                    <div class="col-3">
                        <fieldset>
                            <!--<legend>Filtrar por fecha</legend>-->
                        </fieldset>
                        <div class="row">
                            <div class="col-6">
                                <plex-datetime type="date" [(ngModel)]="fechaDesde" (change)="filtrarPorFecha()" name="horaInicio" label="Desde">
                                </plex-datetime>
                            </div>
                            <div class="col-6">
                                <plex-datetime type="date" [(ngModel)]="fechaHasta" (change)="filtrarPorFecha()" name="horaInicio" label="Hasta">
                                </plex-datetime>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <label class="form-control-label">Filtrar por paciente</label>

                        <!--Agregar las clases active ngclass-->
                        <div class="btn-group" data-toggle="buttons">
                            <label class="btn btn-primary hover" [ngClass]="{active: filtros == 'filtroInactivo'}">
                  <input type="radio"name="options" id="inactivo"  (click)="soloPacientesProfesional()">
                   Solo mis pacientes</label>
                            <label class="btn btn-primary hover" [ngClass]="{active: filtros == 'filtroInactivo'}">
                  <input type="radio"name="options" id="inactivo"  (click)="todosLosPacientes()">
                   Todos los pacientes</label>
                        </div>
                    </div>
                    <div class="col-3">
                        <fieldset>
                            <!--<legend>Filtro por estado</legend>-->
                        </fieldset>
                        <plex-select [(ngModel)]="estadoSeleccion" name="nombrePrestacion" label="Estados" (getData)="loadEstados($event)" (change)="filtraPorEstado()">
                        </plex-select>
                    </div>
                    <div class="col-3">
                        <fieldset>
                            <!--<legend>Filtro tipo de prestacion</legend>-->
                        </fieldset>
                        <plex-select [(ngModel)]="prestacionSeleccion" name="nombrePrestacion" label="Tipos de prestaciÃ³nes" (getData)="loadPrestacionesProfesional($event)" (change)="filtraPorPrestacion()">
                        </plex-select>
                    </div>
                </div>
                <div class="row" *ngIf="mostrarLista">
                    <div class="col 12">
                        <table class="table table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th><strong>Fecha</strong></th>
                                    <th><strong>Paciente</strong></th>
                                    <th><strong>Profesional</strong></th>
                                    <th><strong>Estado</strong></th>
                                    <th><strong>Tipo de prestacion</strong></th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr class="item" *ngFor="let pacientes of PacientesPresentes" (click)="elegirPrestacion(pacientes.idPrestacion)">
                                    <th class="list-group-item-hora">
                                        Fecha acaaa.
                                    </th>
                                    <th>
                                        {{pacientes.paciente.nombre}} | {{pacientes.paciente.apellido}}
                                    </th>
                                    <th>
                                        {{pacientes.profesionales.nombre}} | {{pacientes.profesionales.apellido}}
                                    </th>
                                    <th>
                                        {{pacientes.estado}}
                                    </th>
                                    <th>
                                        {{pacientes.nombrePrestacion}}
                                    </th>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </plex-box>
        </div>
    </div>
</section>



<!--<section *ngIf="alerta">
  <div class="row">
    <div class="col-12">
      <plex-box type="info" title="">
        <div class=" col-12 text-center ">
          <div class="alert alert-danger " role="alert ">
            No se encontraron agendas para el profesional.
          </div>
        </div>
      </plex-box>
    </div>
  </div>
</section>

<section>
  <div class="row">
    <div class="col-6">
      <plex-box>
        <header>
          <div class="row">
            <div class="col">
              <h5 class="box-title-principal">Agendas</h5>
            </div>
          </div>
        </header>
        <div>
          <pre>{{PacientesPresentes | json}}</pre>
        </div>
        <ul class="list-group" *ngFor="let agenda of agendas; let i = index">
          <li class="row no-gutters" *ngFor="let bloque of agenda.bloques; let i=index">
            <div class="col-3">
              <div class="list-group-item-hora">
                <h5> {{bloque.horaInicio | date: 'HH:mm'}} - {{bloque.horaFin | date: 'HH:mm'}} hs.</h5>
              </div>
            </div>

            <div class="col-9 list-group-item">
              <div class="col-9">
                <span class="badge badge-warning" *ngFor="let tipoPrestacion of agenda.tipoPrestaciones">{{agenda.estado ? agenda.estado:''}}</span>
                <br>
                <h5 class="item-title" *ngFor="let tipoPrestacion of agenda.tipoPrestaciones">{{tipoPrestacion.nombre ? tipoPrestacion.nombre:''}} .</h5>
                <br>
                <small> {{agenda.espacioFisico ? agenda.espacioFisico.nombre:''}}</small>
              </div>

              <span class="col-1">
                        <plex-button  icon="magnify" (click)="listadoTurnos(bloque)" title="Listar Turnos" class="btn-contextual"></plex-button>
                    </span>
            </div>
          </li>
        </ul>

      </plex-box>
    </div>

    <div class="col-6" *ngIf="bloqueSeleccionado">
      <plex-box>
        <header>
          <div class="row">
            <div class="col">
              <h5 class="box-title-principal">Listado de Pacientes</h5>
            </div>
          </div>
        </header>

        <ul class="list-group">
          <li class="list-group-item" *ngFor="let p of listaPrestaciones; let i = index" (click)="elegirPrestacion(p.id)">
            <div>
             <pre> {{p.id | json}} </pre>
              <span class="badge badge-warning">{{p.estado[p.estado.length-1].tipo}}</span>
              <br>
              <h5 class="item-title"><strong>{{p.paciente.apellido}}, </strong>{{p.paciente.nombre}}</h5>
              <br>
              <span>Horario: {{turnosPrestacion[p.id].horaInicio | date: 'HH:mm'}} hs. </span>
              <small><span> | DNI {{p.paciente.documento}}</span></small>
              <small *ngFor="let dir of p.paciente.direccion">                 
                <span *ngIf="dir.ubicacion && dir.ubicacion.localidad">              
                   | {{dir.ubicacion.localidad.nombre}}
                </span>
                <span *ngIf="dir.ubicacion.provincia">              
                , {{dir.ubicacion.provincia.nombre}}
                </span>
              </small>
              <small *ngFor="let tel of p.paciente.contacto">| {{tel.valor}}</small>
            </div>
          </li>
        </ul>
      </plex-box>
    </div>

  </div>
</section>-->