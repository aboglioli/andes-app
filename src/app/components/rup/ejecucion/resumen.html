<style>
   h5.box-title-principal {
    color: #00A8E0;
    font-weight: 350;
    padding-bottom: 5px;
  }

    h5.item-title {
    display: inline-block;
    font-weight: 600;
    line-height: 1;
  }
  
  h5.item-title:hover {
    color: #00A8E0;
  }

  .badge {
    text-transform: uppercase;
    font-size: 0.75rem;
    font-weight: 500;
    margin: 0px 10px 10px 0px;
    display: inline-block;
  }
  
  .badge-danger {
    border: 1.5px solid #dd4b39;
    border-radius: 0px;
    background: transparent;
    color: #dd4b39;
  }
  
  .badge-success {
    border: 1.5px solid #8CC63F;
    border-radius: 0px;
    background: transparent;
    color: #8CC63F;
  }
  
  .badge-warning {
    border: 1.5px solid #ff8d22;
    border-radius: 0px;
    background: transparent;
    color: #ff8d22;
  }
  
  .badge-info {
    border: 1.5px solid #00A8E0;
    border-radius: 0px;
    background: transparent;
    color: #00A8E0;
  }
    
    .gris {
        color: #b1b1b1;
    }
</style>

<header *ngIf="!showEjecucion && !showValidacion">
    <header-paciente [paciente]="prestacion.paciente"></header-paciente>
    
    {{prestacion.solicitud.tipoPrestacion.nombre}}
    
</header>

<section *ngIf="!showEjecucion && !showValidacion">
    <div class="row">
        <!--ULTIMAS SOLICITUDES PENDIENTES-->
        <div class="col-4">
            <plex-box>
                <header>                                                                
                    <div class="row">
                        <div class="col">
                            <h5 class="box-title-principal">Planes Pendientes</h5>                           
                        </div>
                    </div>                   
                </header>

                 <ul class="list-group">
                    <li class="list-group-item clearfix" *ngFor="let pendiente of prestacionesPendientes">
                         <div>
                        {{pendiente.solicitud.tipoPrestacion.nombre}}
                        <br>
                        <small>Fecha Solicitud: {{pendiente.solicitud.fecha | date: 'dd/MM/yyyy'}}</small>
                        </div>
                    </li>
                </ul>

               
             </plex-box>
          </div>       

          <!--LISTA DE PROBLEMAS ACTIVOS-->
         <div class="col-4">
              <plex-box> 
                  <header>
                      <div class="row">
                          <div class="col">
                            <h5 class="box-title-principal">Lista de Problemas</h5>
                          </div>
                       </div>      
                  </header>      

                 <ul class="list-group" *ngIf="listaProblemas">
                    <li class="list-group-item" *ngFor="let problema of listaProblemas">
                        <div *ngIf="problema.evoluciones && problema.evoluciones.length > 0">                            
                            <span class="badge badge-success" *ngIf="problema.evoluciones[problema.evoluciones.length - 1].vigencia == 'activo'">
                                Activo
                            </span>
                            <span class="badge badge-danger" *ngIf="problema.evoluciones[problema.evoluciones.length - 1].vigencia != 'activo'">
                                {{problema.evoluciones[problema.evoluciones.length - 1].vigencia}}
                            </span>
                            <br />
                                {{problema.tipoProblema.nombre}}
                            <br />
                            <small>Inicio: {{problema.fechaInicio | date: 'dd/MM/yyyy'}}</small>                                                      
                        </div>
                    </li>
                 </ul>
              </plex-box>      
        </div>

        <!--INDICADORES-->
        <div class="col-4">
            <plex-box> 
                  <header>
                      <div class="row">
                          <div class="col">
                        <h5 class="box-title-principal">Indicadores</h5>
                        </div>
                       </div>      
                  </header>   

                  <div class="row">
                    <div class="col-6">
                            <dl *ngIf="prestacionPeso">
                                <dt>Peso</dt>
                                <!--<dd>{{prestacionPeso.ejecucion.evoluciones[prestacionPeso.ejecucion.evoluciones.length-1].valores.signosVitales.peso}} Kg<br><small>-->
                                    <dd>30 Kg<br><small>
                                    Fecha: {{prestacionPeso.ejecucion.fecha | date: 'dd/MM/yyyy'}}
                            </small></dd>
                            </dl>
                      </div>                        

                    <div class="col-6">
                        <dl *ngIf="prestacionTalla">
                            <dt>Talla</dt>
                            <dd>{{prestacionTalla.ejecucion.evoluciones[prestacionTalla.ejecucion.evoluciones.length-1].valores.talla}} cm<br><small class="gris">
                                Fecha: {{prestacionTalla.ejecucion.fecha | date: 'dd/MM/yyyy'}}
                        </small></dd>
                        </dl>
                    </div>
                </div>
             </plex-box>
        </div>

    </div>
</section>

<footer *ngIf="!showEjecucion && !showValidacion">
    <div class="row">
        <div class="col">
            <plex-button title="Volver" icon="mdi mdi-arrow-left-bold" label="volver" (click)="volver()" type="danger"></plex-button>
        </div>
        <div class="col text-right">
            <plex-button title="Iniciar prestación" label="Iniciar" type="success" (click)="iniciarPrestacion()" *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'pendiente'"></plex-button>
            <plex-button title="Ver resumen" label="Ver resumen" type="success" (click)="verResumen()" *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'validada'"></plex-button>
            <plex-button title="Ver prestación" label="Ver" type="success" (click)="verPrestacion()" *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'ejecucion'"></plex-button>
        </div>
    </div>
</footer>


<div *ngIf="showEjecucion">
    <rup-prestacionEjecucion [prestacion]="prestacion" (evtData)="onReturn(prestacion)"></rup-prestacionEjecucion>
</div>

<div *ngIf="showValidacion">
    <rup-prestacionValidacion [prestacion]="prestacion"></rup-prestacionValidacion>
</div>