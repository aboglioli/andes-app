<style>

   .msg-problema {
        border: 1px solid #ff9900;
        color: #ff9900;
        margin-bottom: 10px;
        padding: 10px;
    }

   h5.box-title-principal {
    color: #00A8E0;
    font-weight: 350;
    padding-bottom: 5px;
  }

  h5.item-title {
    display: inline-block;
    font-weight: 600;
    line-height: 1;
  }
  
  h5.item-title:hover {
    color: #00A8E0;
  }

  h5.box-title-secundario {
    color: #00A8E0;
    font-weight: 350;
    padding-bottom: 5px;
    border-bottom: solid black 1px;
    position: relative;
    float: left;
  }

  .badge {
    text-transform: uppercase;
    font-size: 0.75rem;
    font-weight: 500;
    margin: 0px 10px 10px 0px;
    display: inline-block;
  }
  
  .badge-danger {
    border: 1.5px solid #dd4b39;
    border-radius: 0px;
    background: transparent;
    color: #dd4b39;
  }
  
  .badge-success {
    border: 1.5px solid #8CC63F;
    border-radius: 0px;
    background: transparent;
    color: #8CC63F;
  }
  
  .badge-warning {
    border: 1.5px solid #ff8d22;
    border-radius: 0px;
    background: transparent;
    color: #ff8d22;
  }
  
  .badge-info {
    border: 1.5px solid #00A8E0;
    border-radius: 0px;
    background: transparent;
    color: #00A8E0;  

  }
    
</style>


<header>
    <!--<header-paciente [paciente]="prestacion.paciente"></header-paciente>-->
    <!--<div class="row" *ngIf="prestacion && prestacion.paciente">
        <div class="col-12">
            <h5 class="box-title-secundario">{{prestacion.solicitud.tipoPrestacion.nombre}}</h5>
        </div>
    </div> -->
</header>
  

<section >           
    <div class="row">                                    
        <!--ULTIMAS SOLICITUDES PENDIENTES-->
        <div class="col-4">
            <plex-box>
                <header>                                                                
                    <div class="row">
                        <div class="col">
                            <h5 class="box-title-principal">Planes Pendientes</h5>                           
                        </div>
                    </div>                   
                </header>

                <ul class="list-group">
                    <li class="list-group-item" *ngFor="let pendiente of prestacionesPendientes">                                                    
                        <div>                            
                            <strong>{{pendiente.solicitud.tipoPrestacion.nombre}}</strong>
                            <br>
                            <small>Fecha Solicitud: {{pendiente.solicitud.fecha | date: 'dd/MM/yyyy'}}</small>
                        </div>
                    </li>
                </ul>

            
            </plex-box>
        </div>       

        <!--LISTA DE PROBLEMAS ACTIVOS-->
        <div class="col-4">
            <plex-box> 
                <header>
                    <div class="row">
                        <div class="col">
                            <h5 class="box-title-principal">Lista de Problemas</h5>
                        </div>
                    </div>      
                </header>      

                <ul class="list-group" *ngIf="listaProblemas">
                    <li class="list-group-item" *ngFor="let problema of listaProblemas">
                        <div *ngIf="problema.evoluciones && problema.evoluciones.length > 0">                            
                            <span class="badge badge-success" *ngIf="problema.evoluciones[problema.evoluciones.length - 1].vigencia == 'activo'">
                                Activo
                            </span>
                            <span class="badge badge-danger" *ngIf="problema.evoluciones[problema.evoluciones.length - 1].vigencia != 'activo'">
                                {{problema.evoluciones[problema.evoluciones.length - 1].vigencia}}
                            </span>
                            <br />
                                {{problema.tipoProblema.nombre}}
                            <br />
                            <small>Inicio: {{problema.fechaInicio | date: 'dd/MM/yyyy'}}</small>                                                      
                        </div>
                    </li>
                </ul>
            </plex-box>      
        </div>

        <!--INDICADORES-->
        <div class="col-4">
            <plex-box> 
                <header>
                    <div class="row">
                        <div class="col">
                        <h5 class="box-title-principal">Indicadores</h5>
                        </div>
                    </div>      
                </header>   

                <div class="row">
                    <div class="col-6" >
                            <dl *ngIf="prestacionPeso">
                                <dt>Peso</dt>
                                {{prestacionPeso.valor}} Kg <br />
                                <small>{{prestacionPeso.fecha | date: 'dd/MM/yyyy'}}</small>
                                
                            </dl>
                    </div>                        

                    <div class="col-6">
                        <dl *ngIf="prestacionTalla">
                            <dt>Talla</dt>
                            {{prestacionTalla.valor}} cm  <br />
                            <small>{{prestacionTalla.fecha | date: 'dd/MM/yyyy'}}</small>
                        </dl>
                    </div>
                </div>
            </plex-box>
        </div>
    </div>
</section>

<footer *ngIf="prestacion">
    <div class="row">
        <div class="col">
            <plex-button title="Volver" icon="mdi mdi-arrow-left-bold" label="volver" (click)="volver('/rup')" type="danger"></plex-button>
        </div>
        <div class="col text-right">
            <plex-button *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'pendiente'" 
                          title="Iniciar prestación" label="Iniciar" type="success" (click)="iniciarPrestacion(prestacion.id)">
            </plex-button>
            <plex-button *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'validada'"
                         title="Ver resumen" label="Ver resumen" type="success" (click)="verResumen(prestacion.id)"> 
            </plex-button>
            <plex-button *ngIf="prestacion.estado[prestacion.estado.length-1].tipo == 'ejecucion'"
                          title="Ver prestación" label="Ver" type="success" (click)="verPrestacion(prestacion.id)"> 
            </plex-button>
        </div>
    </div>
</footer>
