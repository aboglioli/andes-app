<header>
    <div class="row" *ngIf="showListarTurnos">
        <div class="col-12">
            <fieldset>
                <!--Header de la agenda-->
                <div class="alert alert-default mb-0">
                    <div class="row">
                        <div class="col-12">
                            <label>Fecha</label> {{ agenda.horaInicio | date: 'EEE' | uppercase }} {{ agenda.horaInicio |
                            date: 'dd/MM/yyyy'}}, {{ agenda.horaInicio | date: 'HH:mm'}} a {{ agenda.horaFin | date: 'HH:mm'}}
                            hs
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <label>Profesionales</label>
                            <span *ngIf="agenda.profesionales?.length == 0" class="text-danger">Profesional no asignado</span>
                            <ng-container *ngIf="agenda.profesionales">
                                <div *ngFor="let profesional of agenda.profesionales">{{profesional | profesional}}</div>
                            </ng-container>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <label>Tipos de prestaci√≥n</label>
                            <div *ngFor="let tipoPrestacion of agenda.tipoPrestaciones">{{tipoPrestacion.nombre}}</div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</header>
<!--Listado de turnos-->
<div class="row">
    <!--Turnos-->
    <table *ngFor="let bloque of agenda.bloques | sortBloques" class="table table-striped">
        <thead *ngIf="bloque.descripcion">
            <tr>
                <th colspan="4">{{bloque.descripcion}} de {{ bloque.horaInicio | date: 'HH:mm'}} a {{ bloque.horaFin | date: 'HH:mm'}} hs
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let turno of bloque.turnos; let i=index" class="hover">
                <td (click)="seleccionarTurno(bloque.turnos[i],false, false)">
                    <strong *ngIf="turno">{{ turno.horaInicio | date: 'HH:mm' }}</strong>
                </td>
                <td>
                    <span *ngIf="turno?.paciente?.id">{{ turno.paciente | paciente }}</span>
                    <small><span *ngIf="turno?.paciente?.id">| DNI {{turno.paciente.documento|number}}</span></small>
                    <small><span *ngIf="turno?.paciente?.id && turno.paciente.carpetaEfectores?.length > 0"> | Nro Carpeta 
                        <span *ngFor="let carpeta of turno.paciente.carpetaEfectores | slice:0:1;">{{carpeta.nroCarpeta}}</span>
                        <span class="text-danger" *ngIf="turno.tipoTurno === 'profesional'">(autocitado)</span>
                        </span></small>
                    <br *ngIf="turno?.paciente?.id && bloque.tipoPrestaciones.length>1"><small><span *ngIf="bloque.tipoPrestaciones.length>1">{{turno.tipoPrestacion.nombre}}</span></small>
                    <span *ngIf="turno && turno.estado === 'disponible'"></span>
                    <span [ngClass]="{'text-danger': turno.estado === 'turnoDoble'}" *ngIf="turno && turno.estado === 'turnoDoble'">Turno Doble</span>
                    <span [ngClass]="{'text-danger': turno.estado === 'suspendido'}" *ngIf="turno && turno.estado === 'suspendido'">Suspendido</span>
                </td>
            </tr>
        </tbody>
    </table>
</div>
