<!--<section>
  <div class="row">
    <div class="col" text-align="center">
      <plex-box>
        <header>
          <plex-button type="link" icon="chevron-left" (click)="cambiarMes('-')"></plex-button>
          {{ fecha | date: "MMM yy" | uppercase}}
          <plex-button type="link" icon="chevron-right" (click)="cambiarMes('+')"></plex-button>
        </header>
      </plex-box>
    </div>
  </div>
  <div class="row">
    <div class="col-8">
      <plex-box>
        <table *ngIf="calendario" class="table table-striped">
          <tr *ngFor="let week of calendario">
            <td *ngFor="let day of week" class="text-center td-calendario" [ngClass]="{
                'bg-primary'          : (day.estado == 'seleccionado') && (day.original == false),
                'text-white'          : (day.estado == 'seleccionado') && (day.original == false),
                'bg-success success'  : day.original == true ,
                'bg-warning'          : day.finde && !(day.estado == 'seleccionado'),
                'hover'               : day.fecha.getTime() >= hoy.getTime()
              }" (click)="seleccionar(day)" style="width: 50px; height: 80px">
              <div>{{ day.fecha | date:"d" }}</div>
              <div>{{ day.fecha | date:"EEE" | uppercase }}</div>
              <div>
                <i *ngIf="day.seleccionado" class="mdi mdi-check-circle"></i>
                <i *ngIf="(!day.seleccionado) && (day.estado == 'disponible')" class="mdi mdi-plus-box"></i>
                <i *ngIf="(!day.seleccionado) && (day.estado == 'ocupado')" class="mdi mdi-close-box"></i>
              </div>
            </td>
          </tr>
        </table>
      </plex-box>
    </div>
    <div class="col">
      <plex-box>
        <header>Agenda Original</header>
        <div class="row">
          <div class="col-12">
            <span><b>Fecha:</b> {{agenda.horaInicio | date: 'dd/MM/yyyy'}} - {{agenda.horaInicio | date: 'HH:mm'}} - {{agenda.horaFin | date: 'HH:mm'}}</span>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <b>Profesional: </b><span *ngFor="let profesional of agenda.profesionales">{{profesional.nombre}} {{profesional.apellido}} - </span>
            <br /><b>Prestaciones: </b><span *ngFor="let prestacion of agenda.prestaciones">{{prestacion.nombre}} - </span>
            <br /><b>Espacio Físico: </b><span>{{agenda.espacioFisico?agenda.espacioFisico.nombre:''}}</span>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label>Bloques</label>

          </div>
        </div>
        <div class="row">
          <template ngFor let-unBloque="$implicit" [ngForOf]="agenda.bloques" let-i="index">
            <div class="col">{{unBloque.descripcion}}</div>
            <div class="col">{{unBloque.horaInicio | date: 'HH:mm'}} - {{unBloque.horaFin | date: 'HH:mm'}}</div>
            <div class="col">{{unBloque.cantidadTurnos}} turnos de {{unBloque.duracionTurno}}'</div>
          </template>
        </div>
        <div *ngIf="agendasFiltradas.length>0">
          <hr>
          <header>Agendas en conflicto</header>
          <plex-accordion>
            <template ngFor let-agendaF="$implicit" [ngForOf]="agendasFiltradas" let-i="index">
              <plex-panel tituloPrincipal="{{agendaF.horaInicio | date: 'dd/MM/yyyy hh:mm'}}" icon="arrow-down-drop-circle-outline">
                <li *ngIf="agendaF.conflictoEF">
                  Conflicto con Espacio Físico
                </li>
                <li *ngIf="agendaF.conflictoProfesional">
                  Conflicto con Profesionales
                </li>
              </plex-panel>
            </template>
          </plex-accordion>
        </div>
      </plex-box>
    </div>

  </div>
</section>
<footer>
  <plex-button title="Clonar Agenda" label="Clonar Agenda" type="primary" (click)="clonar()"></plex-button>
  <plex-button title="Cancelar" label="Cancelar" (click)="cancelar()"></plex-button>
</footer>-->

<!--<header *ngIf="showDarTurnos" class="header-paciente">
  <header-paciente [paciente]="paciente"></header-paciente>
</header>-->
<form class="plex-layout" #form="ngForm">
  <section>
    <div class="row">
      <div class="col-8">
        <plex-box>
          <header>
            <plex-button type="link" icon="chevron-left" (click)="cambiarMes('-')"></plex-button>
            {{ fecha | date: "MMM yy" | uppercase}}
            <plex-button type="link" icon="chevron-right" (click)="cambiarMes('+')"></plex-button>
          </header>
          <table *ngIf="calendario" class="table table-striped">
            <tr *ngFor="let week of calendario">
              <td *ngFor="let day of week" class="text-center td-calendario" [ngClass]="{
                          'bg-primary'          : (day.estado == 'seleccionado') && (day.original == false),
                          'text-white'          : (day.estado == 'seleccionado') && (day.original == false),
                          'bg-success success'  : day.original == true ,
                          'bg-warning'          : day.finde && !(day.estado == 'seleccionado'),
                          'hover'               : day.fecha.getTime() >= hoy.getTime()
                      }" (click)="seleccionar(day)" style="width: 50px; height: 80px">
                <div>{{ day.fecha | date:"d" }}</div>
                <div>{{ day.fecha | date:"EEE" | uppercase }}</div>
                <div>
                  <i *ngIf="day.seleccionado" class="mdi mdi-check-circle"></i>
                  <i *ngIf="(!day.seleccionado) && (day.estado == 'disponible')" class="mdi mdi-plus-box"></i>
                  <i *ngIf="(!day.seleccionado) && (day.estado == 'ocupado')" class="mdi mdi-close-box"></i>
                </div>
              </td>
            </tr>
          </table>
        </plex-box>
      </div>
      <div class="col-4">
        <plex-box>
          <div class="row">
            <div class="col-12">
              <fieldset>
                <legend>
                  <div class="clearfix">
                    <span class="float-left">Agenda Original</span>
                    <!--<span class="badge-success float-right">{{ agenda.estado }}</span>-->
                  </div>
                </legend>
              </fieldset>
            </div>
          </div>
          <!--<header>Agenda Original</header>-->
          <div class="row">
            <div class="col-12">
              <span><b>Fecha:</b> {{agenda.horaInicio | date: 'dd/MM/yyyy'}} - {{agenda.horaInicio | date: 'HH:mm'}} - {{agenda.horaFin | date: 'HH:mm'}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <b>Profesional: </b><span *ngFor="let profesional of agenda.profesionales">{{profesional.nombre}} {{profesional.apellido}} - </span>
              <br /><b>Prestaciones: </b><span *ngFor="let prestacion of agenda.prestaciones">{{prestacion.nombre}} - </span>
              <br /><b>Espacio Físico: </b><span>{{agenda.espacioFisico?agenda.espacioFisico.nombre:''}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label>Bloques</label>

            </div>
          </div>
          <div class="row">
            <template ngFor let-unBloque="$implicit" [ngForOf]="agenda.bloques" let-i="index">
              <div class="col">{{unBloque.descripcion}}</div>
              <div class="col">{{unBloque.horaInicio | date: 'HH:mm'}} - {{unBloque.horaFin | date: 'HH:mm'}}</div>
              <div class="col">{{unBloque.cantidadTurnos}} turnos de {{unBloque.duracionTurno}}'</div>
            </template>
          </div>
          <div *ngIf="agendasFiltradas.length>0">
            <hr>
            <header>Agendas en conflicto</header>
            <plex-accordion>
              <template ngFor let-agendaF="$implicit" [ngForOf]="agendasFiltradas" let-i="index">
                <plex-panel tituloPrincipal="{{agendaF.horaInicio | date: 'dd/MM/yyyy hh:mm'}}" icon="arrow-down-drop-circle-outline">
                  <li *ngIf="agendaF.conflictoEF">
                    Conflicto con Espacio Físico
                  </li>
                  <li *ngIf="agendaF.conflictoProfesional">
                    Conflicto con Profesionales
                  </li>
                </plex-panel>
              </template>
            </plex-accordion>
          </div>
        </plex-box>
      </div>
    </div>
  </section>

  <footer>
    <div class="row">
      <div class="col text-right">
        <plex-button type="danger" icon="close-circle-outline" label="Cancelar" (click)="cancelar()">
        </plex-button>
        <plex-button icon="mdi mdi-content-copy" label="Clonar Agenda" type="success" (click)="clonar()" title="Clonar">
        </plex-button>
      </div>
    </div>
    <!--<plex-button title="Clonar Agenda" label="Clonar Agenda" type="primary" (click)="clonar()"></plex-button>-->
  </footer>
</form>
