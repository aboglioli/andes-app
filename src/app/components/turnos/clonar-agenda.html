<div class="col-md-12" text-align="center">
  <h4>
    <plex-button type="link" icon="chevron-left" (click)="cambiarMes('-')"></plex-button>
    {{ fecha | date: "MMM yy" | uppercase}}
    <plex-button type="link" icon="chevron-right" (click)="cambiarMes('+')"></plex-button>
  </h4>
</div>
<div class="row">
  <div class="col-md-8">
    <table *ngIf="calendario" class="table table-striped">
      <tr *ngFor="let week of calendario">
        <td *ngFor="let day of week" class="text-center" [ngClass]="{'bg-primary primary': (day.estado == 'seleccionado') && (day.original == false),
        'bg-success success': (day.estado == 'seleccionado') && (day.original == true) ,'hover': true}" (click)="seleccionar(day)">
          <div>{{ day.fecha | date:"d" }}</div>
          <div>{{ day.fecha | date:"EEE" | uppercase }}</div>
          <div>
            <i *ngIf="day.seleccionado" class="mdi mdi-check-circle"></i>
            <i *ngIf="(!day.seleccionado) && (day.estado == 'disponible')" class="mdi mdi-plus-box"></i>
            <i *ngIf="(!day.seleccionado) && (day.estado == 'ocupado')" class="mdi mdi-close-box"></i>
          </div>
          </td>
      </tr>
    </table>
  </div>
  <div *ngIf="agendasFiltradas.length>0" class="col-md-4">
    <plex-box title="Agendas del día">
      <ul class="list-group">
        <li class="list-group-item" *ngFor="let agenda of agendasFiltradas; let i = index">
          <div class="row">
            <div class="col-md-8">
              <div class="row">
                <div class="col-md-12">
                  <span><b>Fecha:</b> {{agenda.horaInicio | date: 'dd/MM/yyyy'}} - {{agenda.horaInicio | date: 'HH:mm'}} - {{agenda.horaFin | date: 'HH:mm'}}</span>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <b>Profesional: </b><span *ngFor="let profesional of agenda.profesionales">{{profesional.nombre}} {{profesional.apellido}} - </span>
                  <br /><b>Prestaciones: </b><span *ngFor="let prestacion of agenda.prestaciones">{{prestacion.nombre}} - </span>
                  <!--<br /><span><b>Esp. Físico: </b> {{agenda.espacioFisico.nombre}}</span>-->
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </plex-box>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <plex-button title="Clonar Agenda" label="Clonar Agenda" type="danger" (click)="clonar()"></plex-button>
  </div>
</div>
<!--<div class="row">
  <div class="col-md-8">
    <calendario [agendas]="agendas" [fecha]="fecha" [agenda]="agenda" [estado]="estado" (agenda-changed)="seleccionarAgenda($event)"></calendario>
  </div>
</div>-->
