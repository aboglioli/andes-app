<div class="row" *ngIf="showTurnos">
    <plex-box>
        <div class="row">
            <div class="col-md-12">
                <label>Turnos: {{ag.horaInicio | date: 'dd/MM/yyyy'}}</label>
                <div class="list-group">
                    <div *ngFor="let bloque of ag.bloques; let i=index">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-7"><span><b>Bloque: </b>{{bloque.descripcion}}</span></div>
                                <div class="col-md-5" *ngIf="ag.estado == 'Suspendida'">
                                    <a class="hover" (click)="enviarSMS(bloque.turnos)"><i title="Enviar SMS" class="mdi mdi-message-draw"></i></a>
                                </div>

                                <table class="table table-hover">
                                    <tr *ngFor="let turno of bloque.turnos; let i=index" [ngClass]="{'text-success success': turno.paciente}">
                                        <td *ngIf="(turno.paciente) || (ag.estado != 'Suspendida')"><span>{{turno.horaInicio | date: 'HH:mm'}}</span> </td>
                                        <td *ngIf="(turno.paciente) || (ag.estado != 'Suspendida')">
                                            <span *ngIf="turno.paciente">{{turno.paciente.apellido}} {{turno.paciente.nombre}}</span>
                                            <span *ngIf="(!turno.paciente) && (ag.estado != 'Suspendida')">Disponible</span>
                                        </td>

                                        <td *ngIf="turno.paciente">
                                            <a id="darAsistencia" *ngIf="(ag.estado != 'Suspendida') && (!turno.asistencia)" class="hover" (click)="eventosTurno(ag, turno, $event)"><i title="Dar Asistencia" class="text-success success mdi mdi-checkbox-multiple-blank-outline"></i></a>
                                            <a id="sacarAsistencia" *ngIf="(ag.estado != 'Suspendida') && (turno.asistencia)" class="hover" (click)="eventosTurno(ag, turno, $event)"><i title="Sacar Asistencia" class="text-success success mdi mdi-checkbox-multiple-marked-outline"></i></a>
                                        </td>

                                        <td *ngIf="(ag.estado != 'Suspendida') && (!turno.paciente)">
                                            <i title="Turno Disponible" class="text-info info mdi mdi-select"></i>
                                        </td>

                                        <td *ngIf="ag.estado != 'Suspendida'"><a class="hover"><i title="Suspender Turno" class="text-success success mdi mdi-power"></i></a></td>

                                        <td *ngIf="(ag.estado != 'Suspendida') && (!turno.asistencia)">
                                            <a id="cancelarTurno" class="hover" (click)="eventosTurno(ag, turno, $event)"><i title="Cancelar Turno" class="text-success success mdi mdi-stop"></i></a>
                                        </td>

                                        <td *ngIf="ag.estado != 'Suspendida'">
                                            <a id="bloquearTurno" class="hover" (click)="eventosTurno(ag, turno, $event)"><i title="Bloquear Turno"                                             
                                            [ngClass]="(turno.estado == 'bloqueado') ? 'text-success success mdi mdi-block-helper':'text-success success mdi mdi-brightness-1'" ></i></a>
                                        </td>
                                        <td *ngIf="ag.estado != 'Suspendida'"><a class="hover"><i title="Reasignar Turno" class="text-success success mdi mdi-backup-restore"></i></a></td>

                                        <td *ngIf="(ag.estado == 'Suspendida') && (turno.paciente)" class="text-center">
                                            <i *ngIf="(!smsEnviado) && (!smsLoader)" title="SMS No Enviado" class="text-danger danger mdi mdi-checkbox-blank-circle-outline"></i>
                                            <i *ngIf="(smsEnviado) && (!smsLoader)" title="SMS Enviado" class="text-success success mdi mdi-checkbox-marked-circle-outline"></i>
                                            <plex-loader *ngIf="smsLoader" type="ball-pulse"></plex-loader>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </plex-box>
</div>